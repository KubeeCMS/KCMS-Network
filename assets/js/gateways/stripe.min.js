let stripe;const stripeElements=function(e){stripe=Stripe(e);const t=stripe.elements().create("card",{hidePostalCode:!0});jQuery("body").on("wu_on_form_success",(function(e,r,o){"stripe"===r.gateway&&handlePayment(e,null,o,t)})),jQuery("body").on("wu_on_form_updated",(function(e,r){if("stripe"===r.gateway&&"add-new"===r.payment_method)try{t.mount("#card-element"),wu_stripe_update_styles(t,"#field-payment_template")}catch(e){}else try{t.unmount("#card-element")}catch(e){}})),t.on("focus",(function(){document.getElementById("card-element").classList.add("focused")})),t.on("blur",(function(){document.getElementById("card-element").classList.remove("focused")}))};function wu_stripe_update_styles(e,t){void 0===typeof t&&(t="#field-payment_template");const r=document.querySelector(t);if(null===r)return;const o=window.getComputedStyle(r),d=document.createElement("style");d.innerHTML=".StripeElement {background-color:"+o.getPropertyValue("background-color")+";border-top-color:"+o.getPropertyValue("border-top-color")+";border-right-color:"+o.getPropertyValue("border-right-color")+";border-bottom-color:"+o.getPropertyValue("border-bottom-color")+";border-left-color:"+o.getPropertyValue("border-left-color")+";border-top-width:"+o.getPropertyValue("border-top-width")+";border-right-width:"+o.getPropertyValue("border-right-width")+";border-bottom-width:"+o.getPropertyValue("border-bottom-width")+";border-left-width:"+o.getPropertyValue("border-left-width")+";border-top-style:"+o.getPropertyValue("border-top-style")+";border-right-style:"+o.getPropertyValue("border-right-style")+";border-bottom-style:"+o.getPropertyValue("border-bottom-style")+";border-left-style:"+o.getPropertyValue("border-left-style")+";border-top-left-radius:"+o.getPropertyValue("border-top-left-radius")+";border-top-right-radius:"+o.getPropertyValue("border-top-right-radius")+";border-bottom-left-radius:"+o.getPropertyValue("border-bottom-left-radius")+";border-bottom-right-radius:"+o.getPropertyValue("border-bottom-right-radius")+";padding-top:"+o.getPropertyValue("padding-top")+";padding-right:"+o.getPropertyValue("padding-right")+";padding-bottom:"+o.getPropertyValue("padding-bottom")+";padding-left:"+o.getPropertyValue("padding-left")+";}",document.body.appendChild(d),e.update({style:{base:{color:o.getPropertyValue("color"),fontFamily:o.getPropertyValue("font-family"),fontSize:o.getPropertyValue("font-size"),fontWeight:o.getPropertyValue("font-weight"),fontSmoothing:o.getPropertyValue("-webkit-font-smoothing")}}})}function wu_stripe_handle_intent(e,t,r,o){return r.payment_method?stripe[e](t,r):stripe[e](t,o,r)}function handlePayment(e,t,r,o){if(!r.gateway.data.stripe_client_secret)return;const d={payment_method_data:{billing_details:{name:"Test Emerson"}}};wu_stripe_handle_intent("payment_intent"===r.gateway.data.stripe_intent_type?"handleCardPayment":"handleCardSetup",r.gateway.data.stripe_client_secret,d,o).then((function(e){}))}jQuery("body").on("wu_before_form_init",(function(e,t){t.add_new_card=wu_stripe.add_new_card,t.payment_method=wu_stripe.payment_method})),jQuery("body").on("wu_checkout_loaded",(function(e){stripeElements(wu_stripe.pk_key)}));