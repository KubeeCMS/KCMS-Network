!function(e,t){t.addAction("wu_list_table_update","nextpress/wp-ultimo",(function(e,t,n){"pending"===e.type&&"site_list_table"===t.table_id?n.find("select[name^=action] > option[value=delete]").attr("value","delete-pending"):n.find("select[name^=action] > option[value=delete-pending]").attr("value","delete")})),e(document).on("click","#cb-select-all-grid",(function(e){e.preventDefault();const t=jQuery(this).parents("form").find("#the-list").find("input[type=checkbox]"),n=t.prop("checked");t.parents(".wu-grid-item").toggleClass("wu-grid-item-selected",!n),t.prop("checked",!n)})),e(document).on("change",".wu-grid-item input[type=checkbox]",(function(){const t=e(this).prop("checked");e(this).parents(".wu-grid-item").toggleClass("wu-grid-item-selected",t)})),wu_create_list=function(n){return{el:"#"+n,filters_el:"#"+n+"-filters",initialized:!1,init(){const t=this,i=e("#wu-"+n);let a;return jQuery("body").on("click","#doaction, #doaction2",(function(e){const t=jQuery(e.target).parents("form").serialize(),n=new URL("https://example.com?"+t),i=n.searchParams.get("action")||n.searchParams.get("action2"),a=n.searchParams.getAll("bulk-delete[]");"-1"!==i&&a.length&&(e.preventDefault(),n.searchParams.set("bulk_action",i),n.searchParams.forEach((e,t)=>{"bulk_action"!==t&&"bulk-delete[]"!==t&&n.searchParams.delete(t)}),n.searchParams.set("model",wu_list_table.model),wutb_show(wu_list_table.i18n.confirm,wu_list_table.base_url+"&"+n.searchParams.toString()))})),i.on("click",".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a",(function(n){n.preventDefault();const i=this.search.substring(1),a=e.extend({},t.__get_query(i),{order:t.__query(i,"order")||"DESC",paged:t.__query(i,"paged")||"1",s:t.__query(i,"s")||""});t.update(a)})),i.on("keyup","input[name=paged]",(function(n){13===n.which&&n.preventDefault();const i={paged:parseInt(e("input[name=paged]").val())||"1",s:e("input[name=s]").val()||""};window.clearTimeout(a),a=window.setTimeout((function(){t.update(i)}),500)})),!1===t.initialized&&e(t.filters_el).get(0)&&(t.filters=t.init_filters()),t.initialized=!0,t},copy:function(e){return JSON.parse(JSON.stringify(e))},init_filters(){if(void 0===window.Vue)return;const t=this,i=t.copy(window[n+"_config"].filters);return new Vue({el:t.filters_el,data:()=>({open:!0,view:!1,available_filters:[],filters:[]}),computed:{},mounted(){let n;wu_on_load(),e(t.filters_el+" form.search-form").on("submit",(function(e){e.preventDefault()})),e(t.filters_el+" input[name=s]").on("input keyup",(function(i){13===i.which&&i.preventDefault();const a={paged:parseInt(e("input[name=paged]").val())||"1",s:e("input[name=s]").val()||""};""!==e("input[name=s]").val()&&(a.paged="1"),window.clearTimeout(n),n=window.setTimeout((function(){t.update(a)}),500)}))},methods:{set_view(n,i){const a=window.location.href.split("?")[1],o=e.extend({},t.__get_query(a),{paged:t.__query(a,"paged")||"1",s:t.__query(a,"s")||""});this.view=i,o[n]=i,jQuery(".wu-filter .current").removeClass("current"),t.update(o)},get_filter_type:e=>_.findWhere(i,{field:e}).type,get_filter_rule:e=>_.findWhere(i,{field:e}).rule,remove_filter(e){this.filters.splice(e,1)},add_new_filter(){this.filters.push(_.first(t.copy(this.available_filters)))},open_filters(){this.open=!0},close_filters(){this.open=!1}}})},set_history(t){if("page"===window[n+"_config"].context)try{const n=_.omit(t,(function(e,t){return"action"===t||"table_id"===t||!e||0===t.indexOf("_")}));history.pushState({},null,"?"+e.param(n))}catch(e){console.warn("Browser does not support pushState.",e)}},update(i){const a=this,o=e("#wu-"+n),s={action:"wu_list_table_fetch_ajax_results",table_id:n,id:e("input#id").val()};s["_ajax_"+n+"_nonce"]=e("#_ajax_"+n+"_nonce").val();const l=e.extend({},s,i),r=o.find("tbody, .wu-grid-content");r.animate({opacity:.4},300),e.ajax({url:ajaxurl,data:l,statusCode:{403(){r.animate({opacity:1},300)}},success(n){a.set_history(l,s),r.animate({opacity:1},300),void 0!==n.rows&&r.html(n.rows),n.count,n.column_headers.length&&o.find("thead tr, tfoot tr").html(n.column_headers),n.pagination.top.length&&o.find(".tablenav.top .tablenav-pages").html(e(n.pagination.top).html()),n.pagination.bottom.length&&o.find(".tablenav.bottom .tablenav-pages").html(e(n.pagination.bottom).html()),t.doAction("wu_list_table_update",n,l,o)}})},__query(e,t){const n=e.split("&");for(let e=0;e<n.length;e++){const i=n[e].split("=");if(i[0]===t)return i[1]}return!1},__get_query(e){const t=e.split("&"),n={};for(let e=0;e<t.length;e++){const i=t[e].split("=");n[i[0]]=i[1]}return n}}}}(jQuery,wp.hooks);