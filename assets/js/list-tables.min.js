!function(e){e(document).on("click","#cb-select-all-grid",(function(e){e.preventDefault();const t=jQuery(this).parents("form").find("#the-list").find("input[type=checkbox]"),n=t.prop("checked");t.parents(".wu-grid-item").toggleClass("wu-grid-item-selected",!n),t.prop("checked",!n)})),e(document).on("change",".wu-grid-item input[type=checkbox]",(function(){const t=e(this).prop("checked");e(this).parents(".wu-grid-item").toggleClass("wu-grid-item-selected",t)})),wu_create_list=function(t){return{el:"#"+t,filters_el:"#"+t+"-filters",initialized:!1,init(){const n=this,i=e("#wu-"+t);let a;return i.on("click",".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a",(function(t){t.preventDefault();const i=this.search.substring(1),a=e.extend({},n.__get_query(i),{order:n.__query(i,"order")||"DESC",paged:n.__query(i,"paged")||"1",s:n.__query(i,"s")||""});n.update(a)})),i.on("keyup","input[name=paged]",(function(t){13===t.which&&t.preventDefault();const i={paged:parseInt(e("input[name=paged]").val())||"1",s:e("input[name=s]").val()||""};window.clearTimeout(a),a=window.setTimeout((function(){n.update(i)}),500)})),!1===n.initialized&&e(n.filters_el).get(0)&&(n.filters=n.init_filters()),n.initialized=!0,n},copy:function(e){return JSON.parse(JSON.stringify(e))},init_filters(){if(void 0===window.Vue)return;const n=this,i=n.copy(window[t+"_config"].filters);return new Vue({el:n.filters_el,data:()=>({open:!0,view:!1,available_filters:[],filters:[]}),computed:{},mounted(){let t;wu_on_load(),e(n.filters_el+" form.search-form").on("submit",(function(e){e.preventDefault()})),e(n.filters_el+" input[name=s]").on("input keyup",(function(i){13===i.which&&i.preventDefault();const a={paged:parseInt(e("input[name=paged]").val())||"1",s:e("input[name=s]").val()||""};""!==e("input[name=s]").val()&&(a.paged="1"),window.clearTimeout(t),t=window.setTimeout((function(){n.update(a)}),500)}))},methods:{set_view(t,i){const a=window.location.href.split("?")[1],o=e.extend({},n.__get_query(a),{paged:n.__query(a,"paged")||"1",s:n.__query(a,"s")||""});this.view=i,o[t]=i,jQuery(".wu-filter .current").removeClass("current"),n.update(o)},get_filter_type:e=>_.findWhere(i,{field:e}).type,get_filter_rule:e=>_.findWhere(i,{field:e}).rule,remove_filter(e){this.filters.splice(e,1)},add_new_filter(){this.filters.push(_.first(n.copy(this.available_filters)))},open_filters(){this.open=!0},close_filters(){this.open=!1}}})},set_history(n){if("page"===window[t+"_config"].context)try{const t=_.omit(n,(function(e,t){return"action"===t||"table_id"===t||!e||0===t.indexOf("_")}));history.pushState({},null,"?"+e.param(t))}catch(e){console.warn("Browser does not support pushState.",e)}},update(n){const i=this,a=e("#wu-"+t),o={action:"wu_list_table_fetch_ajax_results",table_id:t,id:e("input#id").val()};o["_ajax_"+t+"_nonce"]=e("#_ajax_"+t+"_nonce").val();const r=e.extend({},o,n),s=a.find("tbody, .wu-grid-content");s.animate({opacity:.4},300),e.ajax({url:ajaxurl,data:r,statusCode:{403(){s.animate({opacity:1},300)}},success(t){i.set_history(r,o),s.animate({opacity:1},300),void 0!==t.rows&&s.html(t.rows),t.count,t.column_headers.length&&a.find("thead tr, tfoot tr").html(t.column_headers),t.pagination.top.length&&a.find(".tablenav.top .tablenav-pages").html(e(t.pagination.top).html()),t.pagination.bottom.length&&a.find(".tablenav.bottom .tablenav-pages").html(e(t.pagination.bottom).html())}})},__query(e,t){const n=e.split("&");for(let e=0;e<n.length;e++){const i=n[e].split("=");if(i[0]===t)return i[1]}return!1},__get_query(e){const t=e.split("&"),n={};for(let e=0;e<t.length;e++){const i=t[e].split("=");n[i[0]]=i[1]}return n}}}}(jQuery);