!function(e){e(document).ready((function(){e("#wu-template-placeholders").length&&(window.wu_placeholders=new Vue({el:"#wu-template-placeholders",data:{tax_category:"default",switching:!1,creating:!1,create_name:"",toggle:!1,loading:!0,saving:!1,initialLoading:!0,error:!1,changed:!1,data:{placeholders:[]},delete:[],saveMessage:"",errorMessage:"",rate_type:"standard_rate"},watch:{data:{deep:!0,handler(){this.initialLoading?this.initialLoading=!1:this.changed=!0}},loading(e){!0===e?window.wu_blocked_table=wu_block_ui("table.wp-list-table"):void 0!==window.wu_blocked_table&&window.wu_blocked_table.unblock()}},mounted(){this.loading=!0,this.pull_data(!0),e(".wu-tooltip-vue").tipTip()},created(){const e=document.createEvent("Event");e.initEvent("vue_loaded",!0,!0),e.vue=this,window.dispatchEvent(e)},computed:{selected(){return e(this.data.placeholders).filter((function(e,t){return t.selected}))}},methods:{refresh(e){e.preventDefault(),this.loading=!0,this.pull_data()},select_all(t){const a=e(t.target).is(":checked");this.data.placeholders=e.map(this.data.placeholders,(function(e){return e.selected=a,e}))},pull_data(){const e=this;jQuery.getJSON(ajaxurl+"?action=wu_get_placeholders").done((function(t){e.loading=!1,e.data=t.data})).fail((function(t){e.loading=!1,e.error=!0,e.errorMessage=t.statusText}))},add_row(){Vue.set(this.data,"placeholders",this.data.placeholders.concat([{placeholder:"",content:"",selected:!1}])),this.$forceUpdate()},delete_rows(){this.delete=this.delete.concat(this.selected.get());if(confirm(wu_placeholdersl10n.confirm_message)){const t=e(this.data.placeholders).filter((function(e,t){return!t.selected}));Vue.set(this.data,"placeholders",t.get()),this.$forceUpdate()}},save(){const t=this;t.saving=!0,e.post({url:ajaxurl+"?action=wu_save_placeholders&"+e("#nonce_form").serialize(),data:JSON.stringify({placeholders:t.data.placeholders}),dataType:"json",contentType:"application/json; charset=utf-8"}).success((function(e){t.saving=!1,t.changed=!1,t.delete=[],t.saveMessage=e.message,"success"===e.code&&(t.loading=!0,t.initialLoading=!0,t.pull_data()),setInterval((function(){t.saveMessage=""}),6e3)}))}}}))}))}(jQuery);